<!DOCTYPE html>
<html>
  <head>
    <title>Welcome to Glitch!</title>
    <meta name="description" content="A cool thing made with Glitch">
    <link id="favicon" rel="icon" href="https://glitch.com/edit/favicon-app.ico" type="image/x-icon">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/style.css">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

   </head>
  <body>
    
<div class = "container" id = "userBox">
  <span class ="white" id = "name">
  </span>
    <span class ="white" id = "infor">
  </span>
  <center>
  <h1 class="white" id = "as">
Notitia  
  </h1>
  <h3 class="white">
    Make and Take Surveys
  </h3>
        <center>
          <div id = "buttons">
          </div>
    <div id = "graph">
    </div>
    </center>
  </center>

<div id = "userData">
</div>
</div>


    <script src="https://d3js.org/d3.v4.js"></script>
    <script>
                  
    //parse
    var variable = document.cookie.split(";")
    var stepBarObjects = variable[1].split("=")
    var barObjects = JSON.parse(stepBarObjects[0])
    //var title = Object.keys(barObjects[0])[0]   
    //arrange
          //buttons created in forEach fx below will dictate what index of dataset is to be used.
      var q = 0;
    function setIndex(i){
      q = i;
      d3.select("svg").remove();
      graph();
    }
    var objectArray = [];
    barObjects.forEach(function(x,i){
      objectArray.push(x);
      $("#buttons").append("<button onClick = 'setIndex("+i+")' class='logoutBut'>"+x.title+"</button>   ")
      
    })


      //localStorage.setItem("Test", JSON.stringify(objectArray))
    var numberOfArrays = objectArray.length;
      //load dataset object
      datasetObject = {
        
      }

      
    const dataset = [[4,3,5],[20,33,111]]
                  
    
  function graph(){
var h = 400;
var w = 700
var padding = 60;
        
        const xScale = d3.scaleLinear()
          .domain([0,5])
     .range([padding, w + padding]);
    
    const yScale = d3.scaleLinear()
                .domain([d3.min(dataset[q]), d3.max(dataset[q])])
     .range([h - padding, padding]);
        
var canvas =d3.select("#graph")
        .append("svg")
        .attr("width", h)
        .attr("height",w)
 var bars = canvas.selectAll("rect")
  .data(dataset[q])
    .enter()
     .append("rect")
      .attr("height",(d)=>{
      return d
    })
      .attr("width",(d)=>{
      return 75;
    })
      .attr("y", function(d,i){
    return h-d;
  })
       .attr("x", function(d,i){
    return i*85;
  })
      .attr("fill", "blue")
 
 var tett = canvas.selectAll("div")
    .data(dataset[q])
    .enter()
     .append("div")
           .text(()=>{return "hi"})
 
     const xAxis = d3.axisBottom(xScale)
    canvas.append("g")
       .attr("transform", "translate(0," + (h+60) + ")")  
       .call(xAxis);
    
    const yAxis = d3.axisLeft(yScale);
    canvas.append("g")
    .attr("transform", "translate("+(padding+10)+",0)")
          .call(yAxis);
  }
    
    </script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>

   
</body>
</html>
